{"code":"// import 'es6-promise/auto';\r\nimport { Rpc } from './rpc';\r\nconst debug = require('debug')('Transport');\r\nexport class Transport {\r\n    constructor(opt) {\r\n        // This will be hard coded later\r\n        this._chainId = 'lino-0001';\r\n        this._cdc = null;\r\n        debug('Create transport with option: ', opt);\r\n        this._rpc = new Rpc(opt.nodeUrl); // create with nodeUrl\r\n    }\r\n    query(key, path) {\r\n        // transport: get path and key for ABCIQuery and return result\r\n        // get transport's node and do ABCIQuery\r\n        // rpc client do rpc call\r\n        // check resp\r\n        return this._rpc.abciQuery(path, key).then(result => {\r\n            if (result.code !== 0) {\r\n                throw new Error(`Query failed: ${result.code}\\n${result.log}`);\r\n            }\r\n            if (result.value === null) {\r\n                throw new Error(`Empty response\\n${result.log}`);\r\n            }\r\n            return result.value;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/transport/index.ts\"],\"names\":[],\"mappings\":\"AAAA,6BAA6B;AAC7B,OAAO,EAAE,GAAG,EAAE,MAAM,OAAO,CAAC;AAE5B,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,CAAC;AAU5C,MAAM;IAMJ,YAAY,GAAsB;QALlC,gCAAgC;QACxB,aAAQ,GAAG,WAAW,CAAC;QAEvB,SAAI,GAAG,IAAI,CAAC;QAGlB,KAAK,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,sBAAsB;IAC1D,CAAC;IAED,KAAK,CAAI,GAAe,EAAE,IAAY;QACpC,8DAA8D;QAC9D,wCAAwC;QACxC,yBAAyB;QACzB,aAAa;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAI,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YACrD,IAAI,MAAM,CAAC,IAAI,KAAK,CAAC,EAAE;gBACrB,MAAM,IAAI,KAAK,CAAC,iBAAiB,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;aAChE;YACD,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE;gBACzB,MAAM,IAAI,KAAK,CAAC,mBAAmB,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;aAClD;YACD,OAAO,MAAM,CAAC,KAAU,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;CACF\"}"}
